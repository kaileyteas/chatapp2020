(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{32:function(e,t,a){e.exports=a(48)},37:function(e,t,a){},39:function(e,t,a){},43:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n,c=a(0),o=a.n(c),r=a(25),s=a.n(r),i=(a(37),a(17)),m=a.n(i),l=a(6),u=(a(39),a(31)),d=a(30),f=a(11),p=(a(22),a(24),"messages");function h(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),o=a[0],r=a[1];return Object(c.useEffect)((function(){n.collection(p).where("room","==",e).onSnapshot((function(e){return e.docChanges().forEach((function(e){var t,a,n=e.doc,c=e.type;"added"===c&&(t=Object(u.a)({},n.data(),{id:n.id}),r((function(e){var a=[t].concat(Object(d.a)(e));return a.sort((function(e,t){return t.ts.seconds-e.ts.seconds})),a}))),"removed"===c&&(a=n.id,r((function(e){return e.filter((function(e){return e.id!==a}))})))}))}))}),[]),o}var g={send:function(e){return n.collection(p).add(e)},delete:function(e){return n.collection(p).doc(e).delete()}};f.initializeApp({apiKey:"AIzaSyC37_Lo0EODqLfGtxg7v1FDHbgHUSBa0no",authDomain:"chatroom-e34eb.firebaseapp.com",databaseURL:"https://chatroom-e34eb.firebaseio.com",projectId:"chatroom-e34eb",storageBucket:"chatroom-e34eb.appspot.com",messagingSenderId:"86918280767",appId:"1:86918280767:web:8cd5ba999c6a251e76aa8a"}),n=f.firestore();var b=a(12);var v=function(e){var t=Object(c.useState)(""),a=Object(l.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(!1),i=Object(l.a)(s,2),m=i[0],u=i[1],d=Object(c.useRef)(null);function f(){d.current.focus(),n&&!m&&(e.onSave(n),localStorage.setItem("name",n)),u(!m)}return Object(c.useEffect)((function(){var e=localStorage.getItem("name");e&&(r(e),f())}),[]),o.a.createElement("div",{className:"edit-username"},o.a.createElement("input",{value:n,ref:d,className:"name-input",style:{display:m?"none":"flex"},onChange:function(e){return r(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&f()}}),m&&o.a.createElement("div",{className:"username"},n),o.a.createElement("button",{onClick:f,className:"name-button"},m?o.a.createElement(b.b,null):o.a.createElement(b.c,null)))},E=a(27),w=a(7),j=a(26),O=a.n(j);a(43);function S(e){var t=e.match.params.room,a=Object(c.useState)(""),n=Object(l.a)(a,2),r=n[0],s=n[1],i=Object(c.useState)(!1),u=Object(l.a)(i,2),d=u[0],p=u[1],b=h(t);return o.a.createElement("main",null,d&&o.a.createElement(O.a,{takePicture:function(e){var a,n,c;return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return p(!1),a=Math.random().toString(36).substring(7),n=f.storage().ref(),c=n.child(a+".jpg"),o.next=6,m.a.awrap(c.putString(e,"data_url"));case 6:g.send({img:a,name:r,ts:new Date,room:t});case 7:case"end":return o.stop()}}))}}),o.a.createElement("header",{className:"header"},o.a.createElement("div",{className:"logo-wrap"},o.a.createElement("img",{src:"http://assets.stickpng.com/thumbs/580b57fcd9996e24bc43c541.png",className:"logo"})),"Fresh memes",o.a.createElement(v,{onSave:s})),o.a.createElement("div",{className:"messages"},b.map((function(e,t){return o.a.createElement(y,{key:t,m:e,name:r})}))),o.a.createElement(N,{showCamera:function(){return p(!0)},onSend:function(e){g.send({text:e,name:r,ts:new Date,room:t})}}))}function y(e){var t=e.m,a=e.name;return o.a.createElement("div",{className:"message-wrap",from:t.name===a?"me":"you",onClick:function(){return console.log(t)}},o.a.createElement("div",{className:"message"},o.a.createElement("div",{className:"msg-name"},t.name),o.a.createElement("div",{className:"msg-text"},t.text,t.img&&o.a.createElement("img",{src:"https://firebasestorage.googleapis.com/v0/b/chatroom-e34eb.appspot.com/o/"+t.img+".jpg?alt=media",alt:"pic"}))))}function N(e){var t=Object(c.useState)(""),a=Object(l.a)(t,2),n=a[0],r=a[1];return o.a.createElement("div",{className:"text-input-wrap"},o.a.createElement("button",{onClick:e.showCamera,style:{left:10,right:"auto"}},o.a.createElement(b.a,{style:{height:15,width:15}})),o.a.createElement("input",{value:n,className:"text-input",placeholder:"Enter text",onChange:function(e){return r(e.target.value)},onKeyPress:function(t){"Enter"===t.key&&(n&&e.onSend(n),r(""))}}),o.a.createElement("button",{onClick:function(){e.onSend(n),r("")},className:"button",disabled:!n},"\u2191"))}var k=function(){return Object(c.useEffect)((function(){window.location.pathname.length<2&&(window.location.pathname="home")}),[]),o.a.createElement(E.a,null,o.a.createElement(w.a,{path:"/:room",component:S}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.99796b5d.chunk.js.map