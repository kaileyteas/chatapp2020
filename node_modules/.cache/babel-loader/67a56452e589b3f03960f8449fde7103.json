{"ast":null,"code":"import _objectSpread from \"/Users/kale/Desktop/school/HCDE 438/ChatApp/chatapp/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nimport \"firebase/storage\";\nlet db;\nconst collection = 'messages';\nfirebase.initializeApp({\n  apiKey: \"AIzaSyDe5hejNin_uspcktTCkhfQAhbWMIARuy0\",\n  authDomain: \"chatterrrrrrr.firebaseapp.com\",\n  projectId: \"chatterrrrrrr\",\n  storageBucket: \"chatterrrrrrr.appspot.com\"\n});\ndb = firebase.firestore();\n\ndb.listen = function ({\n  receive,\n  remove\n}) {\n  db.collection(collection) //.where('page','==',page)\n  .onSnapshot(snapshot => {\n    snapshot.docChanges().forEach(change => {\n      if (change.type === \"added\") {\n        // console.log(change.doc.data())\n        if (receive) receive(_objectSpread({\n          id: change.doc.id\n        }, change.doc.data()));\n      }\n\n      if (change.type === 'removed') {\n        if (remove) remove(change.doc.id);\n      }\n    });\n  });\n};\n\ndb.send = function (msg) {\n  return db.collection(collection).add(msg);\n};\n\nexport { db };","map":{"version":3,"sources":["/Users/kale/Desktop/school/HCDE 438/ChatApp/chatapp/src/db.js"],"names":["firebase","db","collection","initializeApp","apiKey","authDomain","projectId","storageBucket","firestore","listen","receive","remove","onSnapshot","snapshot","docChanges","forEach","change","type","id","doc","data","send","msg","add"],"mappings":";AAAA,OAAO,KAAKA,QAAZ,MAA0B,cAA1B;AACA,OAAO,oBAAP;AACA,OAAO,kBAAP;AAEA,IAAIC,EAAJ;AACA,MAAMC,UAAU,GAAG,UAAnB;AAEAF,QAAQ,CAACG,aAAT,CAAuB;AACnBC,EAAAA,MAAM,EAAE,yCADW;AAEnBC,EAAAA,UAAU,EAAE,+BAFO;AAGnBC,EAAAA,SAAS,EAAE,eAHQ;AAInBC,EAAAA,aAAa,EAAE;AAJI,CAAvB;AAMAN,EAAE,GAAGD,QAAQ,CAACQ,SAAT,EAAL;;AAEAP,EAAE,CAACQ,MAAH,GAAY,UAAS;AAACC,EAAAA,OAAD;AAAUC,EAAAA;AAAV,CAAT,EAA2B;AACnCV,EAAAA,EAAE,CAACC,UAAH,CAAcA,UAAd,EAA0B;AAA1B,GACKU,UADL,CACiBC,QAAD,IAAc;AAC1BA,IAAAA,QAAQ,CAACC,UAAT,GAAsBC,OAAtB,CAA+BC,MAAD,IAAY;AAC1C,UAAIA,MAAM,CAACC,IAAP,KAAgB,OAApB,EAA6B;AACzB;AACA,YAAGP,OAAH,EAAYA,OAAO;AAAEQ,UAAAA,EAAE,EAAEF,MAAM,CAACG,GAAP,CAAWD;AAAjB,WAAwBF,MAAM,CAACG,GAAP,CAAWC,IAAX,EAAxB,EAAP;AACf;;AACD,UAAIJ,MAAM,CAACC,IAAP,KAAgB,SAApB,EAA+B;AAC3B,YAAGN,MAAH,EAAWA,MAAM,CAACK,MAAM,CAACG,GAAP,CAAWD,EAAZ,CAAN;AACd;AACA,KARD;AASH,GAXD;AAYH,CAbD;;AAeAjB,EAAE,CAACoB,IAAH,GAAU,UAASC,GAAT,EAAa;AACnB,SAAOrB,EAAE,CAACC,UAAH,CAAcA,UAAd,EAA0BqB,GAA1B,CAA8BD,GAA9B,CAAP;AACH,CAFD;;AAIA,SAAQrB,EAAR","sourcesContent":["import * as firebase from \"firebase/app\"\nimport \"firebase/firestore\"\nimport \"firebase/storage\"\n\nlet db\nconst collection = 'messages'\n\nfirebase.initializeApp({\n    apiKey: \"AIzaSyDe5hejNin_uspcktTCkhfQAhbWMIARuy0\",\n    authDomain: \"chatterrrrrrr.firebaseapp.com\",\n    projectId: \"chatterrrrrrr\",\n    storageBucket: \"chatterrrrrrr.appspot.com\",\n})\ndb = firebase.firestore()\n\ndb.listen = function({receive, remove}){\n    db.collection(collection) //.where('page','==',page)\n        .onSnapshot((snapshot) => {\n        snapshot.docChanges().forEach((change) => {\n        if (change.type === \"added\") {\n            // console.log(change.doc.data())\n            if(receive) receive({id: change.doc.id, ...change.doc.data()})\n        }\n        if (change.type === 'removed') {\n            if(remove) remove(change.doc.id)\n        }\n        })\n    })\n}\n\ndb.send = function(msg){\n    return db.collection(collection).add(msg)\n}\n\nexport {db}"]},"metadata":{},"sourceType":"module"}